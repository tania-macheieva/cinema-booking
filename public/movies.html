    <!DOCTYPE html>
    <html lang="uk">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Фільми - KinoBook</title>
        <style>
            body {
                font-family: "Segoe UI", "Open Sans", "Helvetica Neue", sans-serif;
                background-color: #f7f6f8;
                color: #333;
                padding: 0;
                margin: 0;
            }

            /* Navigation */
            nav {
                background-color: #213786;
                padding: 15px;
                width: 100%;
                font-weight: bold;
            }

            nav ul {
                list-style-type: none;
                margin: 0;
                padding: 0;
                display: flex;
                justify-content: flex-start;
            }

            .logo {
                color: white;
                user-select: none;
                margin: 0 10px;
                padding-right: 7px;
                font-size: 18px;
            }

            nav ul li a {
                color: white;
                text-decoration: none;
                padding: 10px 15px;
                border-radius: 5px;
                transition: background-color 0.3s ease, color 0.3s ease;
            }

            nav ul li a:hover {
                background-color: #ef9010;
                color: #333;
            }


            /* Style for the date selection */
            .date-selector {
                display: flex;
                justify-content: center;
                align-items: center;
                margin: 20px 0;
                padding: 5px;
                user-select: none;
                background-color: #ffffff;
            }

            .date-items {
                display: flex; /* Дати в рядок */
                justify-content: center;
                align-items: center;
            }

            .date-item {
                padding: 10px 20px;
                cursor: pointer;
                text-align: center;
                font-size: 15px;
                border: 1px solid transparent;
                margin: 0 5px; /* Відстань між днями */
                font-weight: bold;
            }

            .date-item.active {
                color: #213786;
                border-bottom: 2px solid #213786;
                border-radius: 12px;
            }

            .date-item.active:hover {
                color: #213786;
                background-color: #ffffff;
                border-bottom: 2px solid #213786;
                border-radius: 12px;
            }

            .date-item.active span {
                color: #213786;
            }

            .date-item:hover {
                border-radius: 12px;
                background-color: #eff1f6;
            }

            .date-item span {
                display: block;
                font-family: "Segoe UI", "Open Sans", "Helvetica Neue", sans-serif;
                color: #333;
            }

            /* Style for navigation arrows */
            .arrow {
                font-size: 24px;
                cursor: pointer;
                margin: 0 15px;
                user-select: none;
            }

            /* Style for movie list */
            .movie-list {
                display: flex;
                flex-direction: column;
                align-items: center;
                margin-top: 20px;
            }

            .movie {
                display: flex;
                width: 90%;
                background-color: #fff;
                border-radius: 10px;
                padding: 20px;
                margin-bottom: 15px;
                box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            }

            .movie img {
                width: 100px;
                height: 150px;
                border-radius: 10px;
                margin-right: 20px;
                cursor: pointer; 
            }

            .movie-info {
                display: flex;
                justify-content: space-between; 
                align-items: center;  
                width: 100%; 
            }

            .movie-info-left {
                flex-grow: 1;
            }

            .movie-info-right {
                display: flex;
                flex-direction: column;
                justify-content: center;  
                text-align: right; 
            }

            .movie-price-container {
                display: flex;
                justify-content: flex-end;  
            }
            .movie-rating {
                font-weight: bold;  
            }
            .movie-price {
                font-size: 18px;
                font-weight: bold;
                color: #213786; 
            }

            .movie-title {
                font-size: 20px;
                font-weight: bold;
                margin-bottom: 10px;
            }

            .movie-description {
                max-width: 500px;
                margin-bottom: 10px;
            }

            .movie-sessions {
                display: flex;
                flex-wrap: wrap;
            }

            .session_time {
                background-color: #213786;
                color: white;
                padding: 7px 10px;
                border-radius: 5px;
                margin: 5px;
                cursor: pointer;
                user-select: none; 
                font-size: 15px;
                font-weight: bold;
            }

            .session_time.past {
                background-color: #ccc; 
                cursor: not-allowed; 
            }

            .session_time.selected {
                background-color: #ef9010; 
                color: #333;
            }
        </style>
    </head>
    <body>
        <!-- Navigation -->
        <nav>
            <ul>
                <li class="logo">KinoBook</li>
                <li><a href="index.html">Головна</a></li>
                <li><a href="movies.html">Фільми</a></li>
                <li><a href="tickets.html">Мої квитки</a></li>
            </ul>
        </nav>

        <!-- Main content -->
        <main>
            <!-- Date selector -->
            <div class="date-selector" id="date-selector">
                <span class="arrow" id="prev-date">&#9664;</span>
                <div class="date-items" id="date-items">
                    <div class="date-item" id="day-0"></div>
                    <div class="date-item" id="day-1"></div>
                    <div class="date-item" id="day-2"></div>
                </div>
                <span class="arrow" id="next-date">&#9654;</span>
            </div>

            <!-- Movie list -->
            <div class="movie-list" id="movie-list">
                <!-- Фільми будуть динамічно додаватися за допомогою JavaScript -->
            </div>
        </main>

        <script>
            let currentDate = new Date();
            let startDateIndex = 0; // Індекс початку видимого періоду (0 - сьогодні)
            let selectedDateIndex = 1; // Індекс вибраного дня (за замовчуванням середній день)

            const moviesData = {}; // Змінна для зберігання даних фільмів (з бази даних)

            const fetchMovies = async () => {
                try {
                    const response = await fetch('/api/movies'); // URL до вашого API для отримання фільмів
                    const data = await response.json();
                    data.forEach(movie => {
                        const releaseDate = new Date(movie.release_date);
                        const dateKey = releaseDate.getDate();
                        if (!moviesData[dateKey]) {
                            moviesData[dateKey] = [];
                        }
                        moviesData[dateKey].push({
                            title: movie.title,
                            genre: movie.genre,
                            description: movie.long_description,
                            image: movie.poster_url,
                            rating: movie.rating,
                            sessions: ["14:00", "16:00", "18:00"], 
                            price: `140 грн`
                        });
                    });
                    updateMovies();
                } catch (error) {
                    console.error('Помилка при отриманні фільмів:', error);
                }
            };

            const updateMovies = () => {
                const movieListDiv = document.getElementById('movie-list');
                movieListDiv.innerHTML = '';
            
                for (let i = 0; i < 3; i++) {
                    const day = currentDate.getDate() + startDateIndex + i; // Вибір дати на основі стартового індексу
                    const month = currentDate.getMonth() + 1; // Місяць
                    const year = currentDate.getFullYear();
            
                    const dateKey = day;
                    const movies = moviesData[dateKey];
            
                    if (movies) {
                        movies.forEach(movie => {
                            const movieDiv = document.createElement('div');
                            movieDiv.className = 'movie';
            
                            movieDiv.innerHTML = `
                                <img src="${movie.image}" alt="${movie.title}" class="movie-poster" data-title="${movie.title}" data-date="${day}" data-session=""/>
                                <div class="movie-info">
                                    <div class="movie-info-left">
                                        <div class="movie-title">${movie.title}</div>
                                        <div class="movie-genre">${movie.genre}</div>
                                        <div class="movie-rating">${movie.rating}</div>
                                        <div class="movie-description">${movie.description}</div>
                                        <div class="movie-sessions"></div>
                                    </div>
                                    <div class="movie-info-right">
                                        <div class="movie-price-container">
                                            <div class="movie-price">${movie.price}</div>
                                        </div>
                                    </div>
                                </div>
                            `;
            
                            // Додаємо сеанси
                            const movieSessionsDiv = movieDiv.querySelector('.movie-sessions');
                            movie.sessions.forEach(session_time => {
                                const sessionElement = document.createElement('div');
                                const now = new Date();
                                const sessionDate = new Date(currentDate);
                                sessionDate.setDate(currentDate.getDate() + startDateIndex + i); // Дата на основі вибраного дня
                                const [hour, minute] = session_time.split(':');
                                sessionDate.setHours(hour, minute);
                                const isPast = sessionDate < now;
            
                                sessionElement.className = `session_time ${isPast ? 'past' : ''}`;
                                sessionElement.dataset.session_time = session_time;
                                sessionElement.innerHTML = session_time;
            
                                // Додаємо обробник кліку для сеансу
                                sessionElement.onclick = () => {
                                    if (!isPast) {
                                        const selectedSession = document.querySelector('.session_time.selected');
                                        if (selectedSession) {
                                            selectedSession.classList.remove('selected');
                                        }
                                        sessionElement.classList.add('selected');
            
                                        // Запам'ятовуємо вибраний сеанс
                                        const moviePoster = movieDiv.querySelector('.movie-poster');
                                        moviePoster.dataset.session_time = session_time; // Зберігаємо вибраний сеанс
                                    }
                                };
            
                                movieSessionsDiv.appendChild(sessionElement);
                            });
            
                            // Додаємо обробник кліку для постера фільму
                            const moviePoster = movieDiv.querySelector('.movie-poster');
                            moviePoster.onclick = () => {
                                const selectedSession = moviePoster.dataset.session_time;
                                if (selectedSession) {
                                    const selectedDate = new Date(currentDate); // Вибрана дата
                                    selectedDate.setDate(currentDate.getDate() + startDateIndex + i); // Встановлюємо вибрану дату
                                    const formattedDate = `${selectedDate.getDate()}.${selectedDate.getMonth() + 1}.${selectedDate.getFullYear()}`;
            
                                    // Перенаправлення на booking.html з параметрами
                                    const movieTitle = movie.title; // Назва фільму
                                    const movieImage = movie.image; // Зображення фільму
                                    window.location.href = `booking.html?title=${encodeURIComponent(movieTitle)}&session_date=${encodeURIComponent(formattedDate)}&session_time=${encodeURIComponent(selectedSession)}&image=${encodeURIComponent(movieImage)}`;


                                }
                            };
            
                            movieListDiv.appendChild(movieDiv);
                        });
                    }
                }
            };

            const updateDateItems = () => {
                const dateItemsDiv = document.getElementById('date-items');
                for (let i = 0; i < 3; i++) {
                    const dateItem = document.getElementById(`day-${i}`);
                    const session_date = new Date(currentDate);
                    session_date.setDate(currentDate.getDate() + startDateIndex + i);
                    dateItem.innerHTML = `${session_date.getDate()}.${session_date.getMonth() + 1}.${session_date.getFullYear()}`;
                    dateItem.onclick = () => {
                        selectedDateIndex = i; // Оновлюємо індекс вибраного дня
                        updateMovies(); // Оновлюємо фільми для вибраної дати
                        const activeItem = document.querySelector('.date-item.active');
                        if (activeItem) {
                            activeItem.classList.remove('active');
                        }
                        dateItem.classList.add('active'); // Додаємо активний клас для вибраного дня
                    };
                    if (i === 1) {
                        dateItem.classList.add('active'); // Вибір середнього дня за замовчуванням
                    }
                }
            };

            const nextDate = () => {
                startDateIndex++;
                updateDateItems();
                updateMovies();
            };

            const prevDate = () => {
                startDateIndex--;
                updateDateItems();
                updateMovies();
            };

            document.getElementById('next-date').onclick = nextDate;
            document.getElementById('prev-date').onclick = prevDate;

            // Завантажуємо фільми при завантаженні сторінки
            fetchMovies();
            updateDateItems();
        </script>
    </body>
    </html>
